<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Voice Record & Playback</title>

<style>
body {
  background:#0f0f14;
  color:white;
  font-family:Arial, sans-serif;
  text-align:center;
  padding:30px;
}
button {
  padding:14px 26px;
  margin:10px;
  font-size:16px;
  border-radius:8px;
  border:none;
  cursor:pointer;
  background:#ff4d8d;
  color:white;
}
audio {
  margin-top:20px;
  width:90%;
  max-width:400px;
}
#status {
  opacity:0.8;
  margin-top:10px;
}
</style>
</head>

<body>

<h2>üéô Record ‚Üí Play (Non-AI)</h2>
<p>Speak softly, then stop</p>

<button id="start">üé§ Start</button>
<button id="stop" disabled>‚èπ Stop</button>

<div id="status">Idle</div>

<audio id="player" controls></audio>

<script>
let mediaRecorder;
let chunks = [];

const startBtn = document.getElementById("start");
const stopBtn = document.getElementById("stop");
const status = document.getElementById("status");
const player = document.getElementById("player");

startBtn.onclick = async () => {
  try {
    const stream = await navigator.mediaDevices.getUserMedia({ audio: true });

    mediaRecorder = new MediaRecorder(stream);
    chunks = [];

    mediaRecorder.ondataavailable = e => chunks.push(e.data);

    mediaRecorder.start();
    status.textContent = "Recording...";
    startBtn.disabled = true;
    stopBtn.disabled = false;

  } catch (e) {
    alert("Mic error");
    console.error(e);
  }
};

stopBtn.onclick = () => {
  mediaRecorder.stop();
  status.textContent = "Preparing playback...";

  mediaRecorder.onstop = () => {
    const blob = new Blob(chunks, { type: mediaRecorder.mimeType });
    const url = URL.createObjectURL(blob);

    player.src = url;

    // üîë APPLY AFTER METADATA LOAD
    player.onloadedmetadata = () => {
      player.playbackRate = 1.15; // female-like pitch illusion
      player.volume = 0.9;
      player.play();
      status.textContent = "Playing ‚úî";
    };

    startBtn.disabled = false;
    stopBtn.disabled = true;
  };
};
</script>

</body>
</html>
